{"ast":null,"code":"const Action = require('./Action');\n\nconst Constants = require('../../util/Constants');\n\nclass GuildRoleDeleteAction extends Action {\n  constructor(client) {\n    super(client);\n    this.deleted = new Map();\n  }\n\n  handle(data) {\n    const client = this.client;\n    const guild = client.guilds.get(data.guild_id);\n    let role;\n\n    if (guild) {\n      role = guild.roles.get(data.role_id);\n\n      if (role) {\n        guild.roles.delete(data.role_id);\n        this.deleted.set(guild.id + data.role_id, role);\n        this.scheduleForDeletion(guild.id, data.role_id);\n        client.emit(Constants.Events.GUILD_ROLE_DELETE, role);\n      } else {\n        role = this.deleted.get(guild.id + data.role_id) || null;\n      }\n\n      if (role) role.deleted = true;\n    }\n\n    return {\n      role\n    };\n  }\n\n  scheduleForDeletion(guildID, roleID) {\n    this.client.setTimeout(() => this.deleted.delete(guildID + roleID), this.client.options.restWsBridgeTimeout);\n  }\n\n}\n/**\n * Emitted whenever a guild role is deleted.\n * @event Client#roleDelete\n * @param {Role} role The role that was deleted\n */\n\n\nmodule.exports = GuildRoleDeleteAction;","map":null,"metadata":{},"sourceType":"script"}